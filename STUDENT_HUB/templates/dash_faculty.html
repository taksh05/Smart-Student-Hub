{% extends "nav_faculty.html"%}
  {% block title %} Faculty Portal - Smart Student Hub Management {% endblock %}
  {% block extra_css %}
  <style>
        *, ::after, ::before {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: #e5e7eb;
}

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f8fafc;
      color: #1f2937;
      display: block;
    }

    /* Header */
    .header {
      background: white;
      border-bottom: 1px solid #e5e7eb;
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo {
      width: 40px;
      height: 40px;
      background: #3b82f6;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 16px;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-text h1 {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
    }

    .logo-text p {
      font-size: 13px;
      color: #6b7280;
    }

    .user-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .notification {
      position: relative;
      width: 24px;
      height: 24px;
      cursor: pointer;
    }

    .notification::before {
      content: "üîî";
      font-size: 18px;
    }

    .notification-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background: #ef4444;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      background: #3b82f6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 14px;
    }

    .user-info h3 {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
    }

    .user-info p {
      font-size: 12px;
      color: #6b7280;
    }

    /* Main Content */
    .main-content {
      padding: 24px;
    }

    .page-header {
      margin-bottom: 32px;
    }

    .page-header h1 {
      font-size: 32px;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .page-header p {
      font-size: 16px;
      color: #6b7280;
    }

    /* Navigation Tabs */
    .nav-tabs {
      display: flex;
      gap: 32px;
      margin-bottom: 32px;
      border-bottom: 1px solid #e5e7eb;
    }

    .nav-tab {
      padding: 12px 4px;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
      position: relative;
    }

    .nav-tab.active {
      color: #3b82f6;
      border-bottom-color: #3b82f6;
    }

    .nav-tab .badge {
      background: #ef4444;
      color: white;
      border-radius: 12px;
      padding: 2px 8px;
      font-size: 12px;
      margin-left: 8px;
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      border: 1px solid #e5e7eb;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .stat-card:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--accent-color);
    }

    .stat-card.orange::before { background: #f97316; }
    .stat-card.blue::before { background: #3b82f6; }
    .stat-card.green::before { background: #10b981; }
    .stat-card.purple::before { background: #8b5cf6; }

    .stat-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
      font-size: 20px;
    }

    .stat-card.orange .stat-icon { background: #fff7ed; }
    .stat-card.blue .stat-icon { background: #eff6ff; }
    .stat-card.green .stat-icon { background: #ecfdf5; }
    .stat-card.purple .stat-icon { background: #f3f4f6; }

    .stat-number {
      font-size: 32px;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 14px;
      color: #6b7280;
      font-weight: 500;
    }

    /* Content Grid */
    .content-grid {
      display: grid;
      grid-template-columns: 60% 40%;
      gap: 24px;
      margin-bottom: 32px;
    }

    /* Recent Submissions */
    .recent-submissions {
      background: white;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      height: 53 vh;
    }

    .recent-submissions:hover {
      transform: scale(1.01);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .section-header {
      padding: 20px 24px;
      border-bottom: 1px solid #e5e7eb;
    }

    .section-header h3 {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
    }

    .submission-item {
      padding: 16px 24px;
      border-bottom: 1px solid #f3f4f6;
      display: flex;
      align-items: center;
      gap: 16px;
      transition: background-color 0.2s ease;
    }

    .submission-item:hover {
      background: #f9fafb;
    }

    .submission-item:last-child {
      border-bottom: none;
    }

    .submission-avatar {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      color: white;
    }

    .submission-avatar.yellow { background: #f59e0b; }
    .submission-avatar.blue { background: #3b82f6; }
    .submission-avatar.green { background: #10b981; }

    .submission-details {
      flex: 1;
    }

    .submission-title {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 4px;
    }

    .submission-meta {
      font-size: 12px;
      color: #6b7280;
    }

    .submission-status {
      font-size: 12px;
      font-weight: 500;
      padding: 4px 8px;
      border-radius: 12px;
    }

    .status-pending {
      background: #fef3c7;
      color: #92400e;
    }

    .status-reviewing {
      background: #dbeafe;
      color: #1d4ed8;
    }

    .status-approved {
      background: #d1fae5;
      color: #065f46;
    }

    /* Quick Actions Card Container */
    .quick-actions-card {
      background: white;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      height: fit-content;
    }

    .quick-actions-card:hover {
      transform: scale(1.01);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      padding: 24px;
    }

    .action-btn {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 28px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .action-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .action-btn.orange:hover { border-color: #f97316; box-shadow: 0 10px 25px rgba(249, 115, 22, 0.2); }
    .action-btn.blue:hover { border-color: #3b82f6; box-shadow: 0 10px 25px rgba(59, 130, 246, 0.2); }
    .action-btn.green:hover { border-color: #10b981; box-shadow: 0 10px 25px rgba(16, 185, 129, 0.2); }
    .action-btn.purple:hover { border-color: #8b5cf6; box-shadow: 0 10px 25px rgba(139, 92, 246, 0.2); }

    .action-icon {
      width: 64px;
      height: 64px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: rgb(244, 236, 236);
    }

    .action-btn.orange .action-icon { background-color: #ee4811; }
    .action-btn.blue .action-icon { background: #3b82f6; }
    .action-btn.green .action-icon { background: #10b981; }
    .action-btn.purple .action-icon { background: #8b5cf6; }

    .action-text {
      font-size: 16px;
      font-weight: 600;
      color: #1f2937;
    }

    /* System Alerts */
    .system-alerts {
      background: white;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      margin-top: 20px;
    }

    .system-alerts:hover {
      transform: scale(1.01);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .alert-item {
      padding: 16px 20px;
      border-bottom: 1px solid #f3f4f6;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .alert-item:last-child {
      border-bottom: none;
    }

    .alert-icon {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      margin-top: 2px;
    }

    .alert-high .alert-icon {
      background: #fee2e2;
      color: #dc2626;
    }

    .alert-normal .alert-icon {
      background: #fef3c7;
      color: #d97706;
    }

    .alert-content {
      flex: 1;
    }

    .alert-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .alert-high .alert-title {
      color: #dc2626;
    }

    .alert-normal .alert-title {
      color: #d97706;
    }

    .alert-description {
      font-size: 13px;
      color: #6b7280;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 16px;
      padding: 40px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 25px 50px rgba(0,0,0,0.2);
      animation: modalAppear 0.3s ease;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      background: #d1fae5;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      font-size: 36px;
      color: #10b981;
    }

    .modal-content h3 {
      color: #1f2937;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .modal-content p {
      color: #6b7280;
      font-size: 16px;
      margin-bottom: 32px;
    }

    .modal-btn {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 16px 32px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 120px;
    }

    .modal-btn:hover {
      background: #2563eb;
      transform: scale(1.05);
    }

    @keyframes modalAppear {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @media (max-width: 1024px) {
      .content-grid {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 640px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }

      .quick-actions {
        grid-template-columns: 1fr;
      }
    }

  </style>
  {% endblock %}
  {% block content %}
{% load humanize %} <div class="main-content">
  <div class="page-header">
    <h1>Welcome, {{ faculty.first_name }}</h1>
    <p>Manage student activities, approvals, and academic progress</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card orange"><div class="stat-icon">‚è∞</div><div class="stat-number">{{ pending_count }}</div><div class="stat-label">Pending Approvals</div></div>
    <div class="stat-card blue"><div class="stat-icon">üë•</div><div class="stat-number">{{ student_count }}</div><div class="stat-label">Total Students</div></div>
    <div class="stat-card green"><div class="stat-icon">‚úÖ</div><div class="stat-number">{{ verified_count|intcomma }}</div><div class="stat-label">Activities Verified</div></div>
    <div class="stat-card purple"><div class="stat-icon">‚ö†</div><div class="stat-number">{{ high_priority_alert_count }}</div><div class="stat-label">High-Priority Alerts</div></div>
  </div>

  <div class="content-grid">

  <div class="recent-submissions">
    <div class="section-header"><h3>Recent Submissions</h3></div>
    
    {% for submission in recent_submissions %}
    <div class="submission-item">
      <div class="submission-avatar blue">{{ submission.student_initials }}</div>
      <div class="submission-details">
        <div class="submission-title">{{ submission.student_name }} - {{ submission.title }}</div>
        <div class="submission-meta">Submitted {{ submission.date|naturalday }} ‚Ä¢ Needs Review</div>
      </div>
      <div class="submission-status status-{{ submission.status|lower }}">{{ submission.status|title }}</div>
    </div>
    {% empty %}
      <div class="submission-item">
        <p>No recent submissions found.</p>
      </div>
    {% endfor %}
  </div>

  <div class="quick-actions-card">
    <div class="section-header"><h3>Quick Actions</h3></div>
    <div class="quick-actions">
      <a  href="/faculty_approvals/"><div  class="action-btn orange"><div class="action-icon">‚úì</div><div class="action-text">Review Approvals</div></div></a>
      <a  href="/fac_reports/"><div class="action-btn blue" id="generateReportBtn"><div class="action-icon">üìä</div><div class="action-text">Generate Report</div></div></a>
      <a  href="/faculty_students/"><div class="action-btn green"><div class="action-icon">üë•</div><div class="action-text">Manage Students</div></div></a>
      <div class="action-btn purple"><div class="action-icon">üìà</div><div class="action-text">View Analytics</div></div>
    </div>
  </div>

</div>

  <div class="system-alerts">
    <div class="section-header"><h3>System Alerts</h3></div>
    {% if high_priority_alert_count > 0 %}
    <div class="alert-item alert-high">
        <div class="alert-icon">‚ö†</div>
        <div class="alert-content">
            <div class="alert-title">High Priority: {{ high_priority_alert_count }} activities pending approval for over 48 hours</div>
            <div class="alert-description">Students may miss submission deadlines. Review required.</div>
        </div>
    </div>
    {% endif %}
    <div class="alert-item alert-normal"><div class="alert-icon">‚ö†</div><div class="alert-content"><div class="alert-title">NAAC Report Due: Quarterly activity report due in 7 days</div><div class="alert-description">Prepare comprehensive student activity summary.</div></div></div>
  </div>
</div>

  <script>
    // Get the generate report button and modal
    const generateReportBtn = document.getElementById('generateReportBtn');
    const modal = document.getElementById('successModal');

    // Add click event listener to the Generate Report button
    generateReportBtn.addEventListener('click', function() {
      // Show the modal
      modal.classList.add('show');
    });

    // Function to close the modal
    function closeModal() {
      modal.classList.remove('show');
    }

    // Close modal when clicking outside of it
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        closeModal();
      }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && modal.classList.contains('show')) {
        closeModal();
      }
    });
  </script>
  {% endblock %}
